<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Engineering in Banking â€” DevUp 2026 Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Grotesk:wght@400;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
:root {
  --bg:#070a0e; --surface:#0d1117; --border:rgba(255,255,255,0.08);
  --text:#eef2f7; --dim:rgba(238,242,247,0.55); --muted:rgba(238,242,247,0.28);
  --green:#22c55e; --amber:#f59e0b; --red:#ef4444; --blue:#3b82f6;
  --purple:#a855f7; --dino:#4ade80;
  --a:#E84393; --b:#1368CE; --c:#D89E00; --d:#26890C;
}
@keyframes fadeIn { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }
@keyframes glow { 0%,100%{box-shadow:0 0 20px rgba(74,222,128,0.1)} 50%{box-shadow:0 0 50px rgba(74,222,128,0.4)} }
@keyframes countdown { from{width:100%} to{width:0%} }
@keyframes pop { 0%{transform:scale(0.8);opacity:0} 70%{transform:scale(1.08)} 100%{transform:scale(1);opacity:1} }
@keyframes confetti-fall { 0%{transform:translateY(-10px) rotate(0deg);opacity:1} 100%{transform:translateY(100vh) rotate(720deg);opacity:0} }
@keyframes ticker { 0%{transform:translateX(100vw)} 100%{transform:translateX(-100%)} }

html,body { width:100vw; height:100vh; overflow:hidden; background:var(--bg); color:var(--text); font-family:'Space Grotesk',sans-serif; }

/* â”€â”€ SCREEN SYSTEM â”€â”€ */
.screen { position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:32px; opacity:0; pointer-events:none; transition:opacity 0.5s ease; }
.screen.active { opacity:1; pointer-events:all; }

/* â”€â”€ SHARED HEADER â”€â”€ */
.quiz-header { position:fixed; top:0; left:0; right:0; height:60px; display:flex; align-items:center; justify-content:space-between; padding:0 36px; background:rgba(7,10,14,0.95); border-bottom:1px solid var(--border); backdrop-filter:blur(20px); z-index:100; }
.qh-logo { font-family:'Bebas Neue',sans-serif; font-size:22px; letter-spacing:2px; }
.qh-logo span { color:var(--dino); }
.qh-badge { font-family:'Space Mono',monospace; font-size:11px; font-weight:700; letter-spacing:1.5px; color:var(--dino); background:rgba(74,222,128,0.08); border:1px solid rgba(74,222,128,0.2); padding:5px 12px; border-radius:6px; }

/* â”€â”€ TICKER â”€â”€ */
.ticker { position:fixed; top:60px; left:0; right:0; height:28px; background:rgba(74,222,128,0.05); border-bottom:1px solid rgba(74,222,128,0.1); display:flex; align-items:center; overflow:hidden; z-index:99; }
.ticker-inner { white-space:nowrap; font-family:'Space Mono',monospace; font-size:10px; font-weight:700; color:rgba(74,222,128,0.65); letter-spacing:1.5px; animation:ticker 22s linear infinite; display:flex; gap:40px; align-items:center; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• WELCOME SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.welcome-content { text-align:center; max-width:780px; animation:fadeIn 0.8s ease; }
.welcome-eyebrow { font-family:'Space Mono',monospace; font-size:11px; font-weight:700; letter-spacing:3px; text-transform:uppercase; color:var(--dino); margin-bottom:20px; }
.welcome-title { font-family:'Bebas Neue',sans-serif; font-size:100px; line-height:0.9; letter-spacing:3px; margin-bottom:20px; }
.welcome-title .t2 { color:var(--dino); display:block; }
.welcome-sub { font-size:19px; color:var(--dim); line-height:1.6; margin-bottom:36px; }
.welcome-stats { display:flex; gap:20px; justify-content:center; margin-bottom:40px; }
.w-stat { background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:14px 24px; text-align:center; }
.w-stat-num { font-family:'Bebas Neue',sans-serif; font-size:40px; color:var(--dino); line-height:1; }
.w-stat-label { font-family:'Space Mono',monospace; font-size:10px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; margin-top:2px; }
.btn-start { display:inline-flex; align-items:center; gap:10px; padding:18px 48px; background:var(--dino); border:none; border-radius:10px; font-family:'Bebas Neue',sans-serif; font-size:26px; letter-spacing:3px; color:#070a0e; cursor:pointer; animation:glow 2.5s ease-in-out infinite; transition:transform 0.15s; }
.btn-start:hover { transform:scale(1.04); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QUESTION SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.q-screen { padding-top:88px; padding-bottom:24px; }
.q-meta { display:flex; align-items:center; justify-content:space-between; width:100%; max-width:960px; margin-bottom:16px; }
.q-counter { font-family:'Space Mono',monospace; font-size:13px; font-weight:700; color:var(--muted); letter-spacing:1px; }
.q-score-badge { font-family:'Space Mono',monospace; font-size:13px; font-weight:700; color:var(--dino); background:rgba(74,222,128,0.08); border:1px solid rgba(74,222,128,0.2); padding:5px 14px; border-radius:6px; }

/* Timer bar */
.timer-track { width:100%; max-width:960px; height:6px; background:rgba(255,255,255,0.06); border-radius:3px; margin-bottom:22px; overflow:hidden; }
.timer-fill { height:100%; background:linear-gradient(90deg, var(--dino), var(--amber)); border-radius:3px; width:100%; transition:none; }

/* Question text */
.q-box { width:100%; max-width:960px; background:var(--surface); border:1px solid var(--border); border-radius:14px; padding:28px 36px; margin-bottom:22px; text-align:center; }
.q-category { font-family:'Space Mono',monospace; font-size:10px; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--dino); margin-bottom:10px; }
.q-text { font-size:22px; font-weight:700; line-height:1.45; color:var(--text); }

/* Answer grid */
.answers { display:grid; grid-template-columns:1fr 1fr; gap:12px; width:100%; max-width:960px; }
.ans-btn { display:flex; align-items:center; gap:14px; padding:18px 22px; border-radius:10px; border:none; cursor:pointer; font-family:'Space Grotesk',sans-serif; font-size:16px; font-weight:700; color:#fff; text-align:left; transition:transform 0.15s, filter 0.2s; }
.ans-btn:hover:not(:disabled) { transform:scale(1.02); filter:brightness(1.15); }
.ans-btn:disabled { cursor:not-allowed; }
.ans-a { background:var(--a); }
.ans-b { background:var(--b); }
.ans-c { background:var(--c); color:#1a1a1a; }
.ans-d { background:var(--d); }
.ans-letter { width:32px; height:32px; border-radius:6px; background:rgba(0,0,0,0.25); display:flex; align-items:center; justify-content:center; font-family:'Space Mono',monospace; font-weight:700; font-size:14px; flex-shrink:0; }
.ans-text { flex:1; }

/* Feedback overlay */
.ans-btn.correct  { outline:4px solid #fff; filter:brightness(1.3) !important; animation:pop 0.4s ease; }
.ans-btn.wrong    { filter:brightness(0.4) !important; }
.ans-btn.reveal   { outline:4px solid #fff; filter:brightness(1.3) !important; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FEEDBACK CARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.feedback-card { width:100%; max-width:960px; background:var(--surface); border-radius:14px; padding:28px 36px; display:flex; align-items:flex-start; gap:20px; margin-bottom:18px; animation:pop 0.4s ease; }
.fb-icon { font-size:40px; flex-shrink:0; }
.fb-body { flex:1; }
.fb-title { font-size:18px; font-weight:800; margin-bottom:6px; }
.fb-title.correct { color:var(--green); }
.fb-title.wrong { color:var(--red); }
.fb-explain { font-size:15px; color:var(--dim); line-height:1.55; }
.fb-points { font-family:'Space Mono',monospace; font-size:22px; font-weight:700; color:var(--dino); margin-left:auto; align-self:center; }

.btn-next { padding:14px 36px; background:var(--surface); border:1.5px solid var(--dino); border-radius:8px; font-family:'Space Mono',monospace; font-size:15px; font-weight:700; color:var(--dino); cursor:pointer; letter-spacing:1px; transition:all 0.2s; align-self:center; }
.btn-next:hover { background:rgba(74,222,128,0.1); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SCORECARD SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.score-wrap { max-width:820px; width:100%; text-align:center; animation:fadeIn 0.8s ease; }
.score-eyebrow { font-family:'Space Mono',monospace; font-size:11px; font-weight:700; letter-spacing:3px; text-transform:uppercase; color:var(--dino); margin-bottom:14px; }
.score-emoji { font-size:72px; margin-bottom:16px; display:block; }
.score-title { font-family:'Bebas Neue',sans-serif; font-size:80px; line-height:0.9; letter-spacing:2px; margin-bottom:8px; }
.score-sub { font-size:18px; color:var(--dim); margin-bottom:32px; }
.score-ring { width:160px; height:160px; border-radius:50%; border:6px solid var(--dino); display:flex; flex-direction:column; align-items:center; justify-content:center; margin:0 auto 32px; position:relative; box-shadow:0 0 40px rgba(74,222,128,0.2); }
.score-num { font-family:'Bebas Neue',sans-serif; font-size:64px; color:var(--dino); line-height:1; }
.score-denom { font-family:'Space Mono',monospace; font-size:13px; color:var(--muted); }
.score-bars { display:flex; flex-direction:column; gap:10px; margin-bottom:32px; text-align:left; }
.s-bar { display:flex; align-items:center; gap:12px; }
.s-bar-label { font-family:'Space Mono',monospace; font-size:11px; color:var(--muted); width:100px; text-transform:uppercase; letter-spacing:0.5px; flex-shrink:0; }
.s-bar-track { flex:1; height:8px; background:rgba(255,255,255,0.06); border-radius:4px; overflow:hidden; }
.s-bar-fill { height:100%; border-radius:4px; transition:width 1.2s cubic-bezier(0.25,0.46,0.45,0.94); }
.s-bar-val { font-family:'Space Mono',monospace; font-size:12px; color:var(--text); width:36px; text-align:right; }

.rank-label { font-family:'Space Mono',monospace; font-size:12px; font-weight:700; letter-spacing:2px; text-transform:uppercase; margin-bottom:8px; color:var(--muted); }
.rank-text { font-family:'Bebas Neue',sans-serif; font-size:36px; letter-spacing:2px; margin-bottom:28px; }

.score-actions { display:flex; gap:14px; justify-content:center; }
.btn-retry { padding:14px 32px; background:var(--dino); border:none; border-radius:8px; font-family:'Bebas Neue',sans-serif; font-size:22px; letter-spacing:2px; color:#070a0e; cursor:pointer; transition:transform 0.15s; }
.btn-retry:hover { transform:scale(1.04); }
.btn-booth { padding:14px 32px; background:var(--surface); border:1.5px solid var(--border); border-radius:8px; font-family:'Space Mono',monospace; font-size:13px; color:var(--dim); cursor:pointer; }

/* â”€â”€ CONFETTI â”€â”€ */
.confetti-piece { position:fixed; top:-10px; width:10px; height:10px; border-radius:2px; opacity:0; animation:confetti-fall 3s ease-in-out forwards; pointer-events:none; }

/* Q screen flex layout */
#screen-question { justify-content:flex-start; align-items:center; }
.q-inner { display:flex; flex-direction:column; align-items:center; width:100%; }
</style>
</head>
<body>

<!-- HEADER -->
<div class="quiz-header">
  <div class="qh-logo">Smart <span>SDLC</span> Quiz</div>
  <div class="qh-badge">DEVUP 2026 Â· CLOUD &amp; AI SUMMIT</div>
</div>

<!-- TICKER -->
<div class="ticker">
  <div class="ticker-inner">
    ğŸ¤– AI ENGINEERING IN BANKING &nbsp;///&nbsp; DEVUP 2026 &nbsp;///&nbsp; 8 QUESTIONS Â· 20 SECONDS EACH &nbsp;///&nbsp; SMARTSDLC &nbsp;///&nbsp; LLM RISK Â· PROMPT INJECTION Â· MODEL DRIFT Â· AGENTIC AI &nbsp;///&nbsp; ğŸ† GET YOUR SCORECARD &nbsp;///&nbsp; ğŸ¤– AI ENGINEERING IN BANKING &nbsp;///&nbsp; DEVUP 2026 &nbsp;///&nbsp; 8 QUESTIONS Â· 20 SECONDS EACH &nbsp;///&nbsp; SMARTSDLC &nbsp;///&nbsp; ğŸ† GET YOUR SCORECARD
  </div>
</div>

<!-- â•â•â•â• SCREEN: WELCOME â•â•â•â• -->
<div class="screen active" id="screen-welcome" style="padding-top:88px;">
  <div class="welcome-content">
    <div class="welcome-eyebrow">DevUp 2026 Â· Cloud &amp; AI Summit Â· JPMorganChase Booth</div>
    <div class="welcome-title">
      AI ENGINEERING
      <span class="t2">IN BANKING</span>
    </div>
    <p class="welcome-sub">8 questions. 20 seconds each. Test your AI engineering knowledge in regulated banking.</p>
    <div class="welcome-stats">
      <div class="w-stat"><div class="w-stat-num">8</div><div class="w-stat-label">Questions</div></div>
      <div class="w-stat"><div class="w-stat-num">20s</div><div class="w-stat-label">Per Question</div></div>
      <div class="w-stat"><div class="w-stat-num">800</div><div class="w-stat-label">Max Score</div></div>
      <div class="w-stat"><div class="w-stat-num">8</div><div class="w-stat-label">AI Topics</div></div>
    </div>
    <button class="btn-start" onclick="startQuiz()">ğŸš€ Start Quiz</button>
  </div>
</div>

<!-- â•â•â•â• SCREEN: QUESTION â•â•â•â• -->
<div class="screen" id="screen-question">
  <div class="q-inner">
    <div class="q-meta">
      <div class="q-counter" id="qCounter">Question 1 of 8</div>
      <div class="q-score-badge" id="qScoreBadge">Score: 0</div>
    </div>
    <div class="timer-track">
      <div class="timer-fill" id="timerFill"></div>
    </div>
    <div class="q-box">
      <div class="q-category" id="qCategory">SDLC Evolution</div>
      <div class="q-text" id="qText">Question text here</div>
    </div>
    <div class="answers" id="answersGrid"></div>
  </div>
</div>

<!-- â•â•â•â• SCREEN: FEEDBACK â•â•â•â• -->
<div class="screen" id="screen-feedback" style="padding-top:88px; justify-content:center;">
  <div class="feedback-card" id="feedbackCard">
    <div class="fb-icon" id="fbIcon">âœ…</div>
    <div class="fb-body">
      <div class="fb-title" id="fbTitle">Correct!</div>
      <div class="fb-explain" id="fbExplain">Explanation here</div>
    </div>
    <div class="fb-points" id="fbPoints">+100</div>
  </div>
  <button class="btn-next" id="btnNext" onclick="nextQuestion()">Next â†’</button>
</div>

<!-- â•â•â•â• SCREEN: SCORECARD â•â•â•â• -->
<div class="screen" id="screen-score" style="padding-top:88px;">
  <div class="score-wrap">
    <div class="score-eyebrow">Your Evolution Scorecard</div>
    <div class="score-emoji" id="scoreEmoji">ğŸ†</div>
    <div class="score-title" id="scoreTitle">EVOLVED!</div>
    <p class="score-sub" id="scoreSub">You've survived Jurassic SDLC.</p>
    <div class="score-ring">
      <div class="score-num" id="scoreNum">0</div>
      <div class="score-denom" id="scoreDenom">/ 800</div>
    </div>
    <div class="score-bars">
      <div class="s-bar">
        <div class="s-bar-label">Correct</div>
        <div class="s-bar-track"><div class="s-bar-fill" id="barCorrect" style="width:0%;background:var(--green)"></div></div>
        <div class="s-bar-val" id="valCorrect">0/8</div>
      </div>
      <div class="s-bar">
        <div class="s-bar-label">Wrong</div>
        <div class="s-bar-track"><div class="s-bar-fill" id="barWrong" style="width:0%;background:var(--red)"></div></div>
        <div class="s-bar-val" id="valWrong">0/8</div>
      </div>
      <div class="s-bar">
        <div class="s-bar-label">Score %</div>
        <div class="s-bar-track"><div class="s-bar-fill" id="barPct" style="width:0%;background:var(--dino)"></div></div>
        <div class="s-bar-val" id="valPct">0%</div>
      </div>
    </div>
    <div class="rank-label">Your SDLC Evolution Rank</div>
    <div class="rank-text" id="rankText">ğŸ¦• Waterfall Fossil</div>
    <div class="score-actions">
      <button class="btn-retry" onclick="restartQuiz()">ğŸ” Play Again</button>
      <button class="btn-booth" onclick="show('screen-welcome')">ğŸ  Back to Start</button>
    </div>
  </div>
</div>

<script>
// â”€â”€â”€ QUESTIONS DATABASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const QUESTIONS = [
  {
    category: "LLM Behaviour",
    text: "You run the same prompt through GPT-4 twice on the same codebase. It gives two different refactoring suggestions. In a regulated bank, what is this called?",
    answers: ["A bug in the model", "Non-determinism \u2014 and it is a model risk concern", "Expected \u2014 just pick the better one", "A temperature setting misconfiguration"],
    correct: 1,
    explain: "LLM non-determinism is formally classified as a model risk concern under SR 11-7. When an AI tool gives different outputs for the same input, it cannot be validated the same way as deterministic software. Banks must document acceptable variance ranges and set temperature=0 for compliance-critical use cases."
  },
  {
    category: "AI Security",
    text: "A bank builds an internal AI assistant that reads Confluence docs to answer engineer questions. An attacker embeds hidden text in a Confluence page. What attack is this?",
    answers: ["SQL injection via the AI interface", "Prompt injection through retrieved documents", "Model poisoning of the LLM weights", "Man-in-the-middle on the API call"],
    correct: 1,
    explain: "This is indirect prompt injection via RAG (Retrieval Augmented Generation). The attacker poisons the documents the model reads. OWASP Top 10 for LLMs lists this as the #1 vulnerability. Every bank RAG system is a potential attack surface."
  },
  {
    category: "AI Code Quality",
    text: "GitHub Copilot suggests a code fix. It passes all unit tests and the security scan. It gets merged. Three months later it causes a production incident. Most likely reason?",
    answers: ["The unit tests had low coverage", "The security scanner missed a CVE", "The fix was correct in isolation but violated an undocumented system contract", "Copilot used a deprecated API"],
    correct: 2,
    explain: "Tests check what code DOES. They cannot check what code was MEANT to do. Undocumented system contracts \u2014 rate limits, sequencing assumptions, regulatory constraints \u2014 are invisible to both Copilot and test suites. This is exactly the gap SmartSDLC addresses."
  },
  {
    category: "AI in Production",
    text: "A bank deploys an ML model for transaction fraud detection. Six months later, fraud recall drops 18%. No code changed. What most likely happened?",
    answers: ["The model was retrained incorrectly", "Feature store pipeline had a data type mismatch", "Model drift \u2014 real-world patterns shifted away from training data", "The fraud team changed their detection threshold"],
    correct: 2,
    explain: "Model drift is one of the most common production AI failures. The model was correct when deployed \u2014 the world changed. Without continuous monitoring of input distribution vs training distribution, you won\u2019t know until recalls drop. SR 11-7 requires ongoing model performance monitoring."
  },
  {
    category: "Agentic AI",
    text: "An AI agent is given access to your bank\u2019s internal APIs to \u2018autonomously resolve Jira tickets.\u2019 A regulator asks: who is accountable for a change the agent made to a payment config?",
    answers: ["The engineer who approved the agent\u2019s access", "The AI vendor whose model powered the agent", "Nobody \u2014 autonomous actions have no clear owner today", "The CISO who signed off the AI policy"],
    correct: 2,
    explain: "Agentic AI accountability is genuinely unresolved in banking regulation today. OCC and FRB guidance has not caught up with autonomous AI actions. This is why leading banks are requiring human-in-the-loop for any agentic action that touches production systems."
  },
  {
    category: "AI Adoption Reality",
    text: "JPMC has 60,000+ engineers. What is the BIGGEST documented barrier to enterprise AI coding tool adoption at scale?",
    answers: ["Engineers don\u2019t trust AI-generated code", "Licensing cost per seat is too high", "AI tools lack context about internal systems and conventions", "Legal hasn\u2019t approved the data sharing terms"],
    correct: 2,
    explain: "Stack Overflow Developer Survey 2024 and GitLab\u2019s Global DevSecOps report both identify the same #1 barrier: AI tools don\u2019t understand the org\u2019s internal codebase, architecture decisions, or domain conventions. Context is the missing ingredient."
  },
  {
    category: "Legacy + AI",
    text: "Your bank has a 40-year-old COBOL settlement system. You use an LLM to generate documentation for it. The LLM produces confident, detailed docs. What is the core risk?",
    answers: ["COBOL syntax is too old for LLMs to parse", "The LLM will hallucinate plausible-sounding but incorrect business rules", "Generated docs won\u2019t pass the style guide checker", "The LLM will expose the code to training data leakage"],
    correct: 1,
    explain: "LLMs produce fluent, confident text \u2014 not uncertainty flags. On underdocumented legacy systems, they hallucinate business rules that sound plausible and are completely wrong. Confident hallucination on legacy systems is more dangerous than no documentation at all."
  },
  {
    category: "The Coherence Question",
    text: "An AI coding agent writes a microservice, another AI reviews it, a third AI writes the tests. All pass. What critical input did NONE of the three AIs have?",
    answers: ["Access to the production database schema", "Knowledge of the programming language version", "The business intent and regulatory context the service must satisfy", "A connection to the CI/CD pipeline"],
    correct: 2,
    explain: "Three AI agents, zero knowledge of WHY. The service compiles, tests pass, review is clean \u2014 nobody checked whether it implements the business rule or satisfies the regulatory control. AI can check code against code. It cannot check code against intent it was never given. That is the SmartSDLC problem statement."
  }
];

// â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let current = 0;
let score = 0;
let correct = 0;
let wrong = 0;
let timer = null;
let timeLeft = 20;
const TIMER_DURATION = 20;
const POINTS_PER_Q = 100;

// â”€â”€â”€ NAVIGATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function show(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function startQuiz() {
  current = 0; score = 0; correct = 0; wrong = 0;
  show('screen-question');
  loadQuestion();
}

function loadQuestion() {
  answered = false;
  const q = QUESTIONS[current];
  document.getElementById('qCounter').textContent = `Question ${current + 1} of ${QUESTIONS.length}`;
  document.getElementById('qScoreBadge').textContent = `Score: ${score}`;
  document.getElementById('qCategory').textContent = q.category;
  document.getElementById('qText').textContent = q.text;

  const grid = document.getElementById('answersGrid');
  grid.innerHTML = '';
  const letters = ['A', 'B', 'C', 'D'];
  const colors = ['ans-a', 'ans-b', 'ans-c', 'ans-d'];
  q.answers.forEach((ans, i) => {
    const btn = document.createElement('button');
    btn.className = `ans-btn ${colors[i]}`;
    btn.innerHTML = `<div class="ans-letter">${letters[i]}</div><div class="ans-text">${ans}</div>`;
    btn.onclick = () => handleAnswer(i);
    grid.appendChild(btn);
  });

  startTimer();
}

function startTimer() {
  timeLeft = TIMER_DURATION;
  clearInterval(timer);
  const fill = document.getElementById('timerFill');
  fill.style.transition = 'none';
  fill.style.width = '100%';

  let elapsed = 0;
  requestAnimationFrame(() => {
    fill.style.transition = `width ${TIMER_DURATION}s linear`;
    fill.style.width = '0%';
  });

  timer = setInterval(() => {
    elapsed++;
    timeLeft = TIMER_DURATION - elapsed;
    if (timeLeft <= 0) {
      clearInterval(timer);
      handleAnswer(-1); // Time up = wrong
    }
  }, 1000);
}

let answered = false;
function handleAnswer(chosen) {
  if (answered) return; // Prevent double-answer
  answered = true;
  clearInterval(timer);
  const q = QUESTIONS[current];
  const btns = document.querySelectorAll('.ans-btn');
  const isCorrect = chosen >= 0 && chosen === q.correct;
  const pts = isCorrect ? Math.max(50, Math.round(POINTS_PER_Q * (timeLeft / TIMER_DURATION))) : 0;

  btns.forEach((btn, i) => {
    btn.disabled = true;
    if (i === q.correct) btn.classList.add('correct');
    else if (i === chosen && !isCorrect) btn.classList.add('wrong');
  });

  if (isCorrect) { score += pts; correct++; }
  else wrong++;

  setTimeout(() => showFeedback(isCorrect, pts, q.explain), 700);
}

function showFeedback(isCorrect, pts, explain) {
  document.getElementById('fbIcon').textContent = isCorrect ? 'âœ…' : 'âŒ';
  document.getElementById('fbTitle').textContent = isCorrect ? 'Correct! Impressive knowledge.' : "Not quite â€” but now you know!";
  document.getElementById('fbTitle').className = `fb-title ${isCorrect ? 'correct' : 'wrong'}`;
  document.getElementById('fbExplain').textContent = explain;
  document.getElementById('fbPoints').textContent = isCorrect ? `+${pts}` : '+0';
  document.getElementById('btnNext').textContent = current < QUESTIONS.length - 1 ? 'Next Question â†’' : 'ğŸ† See Your Score';
  show('screen-feedback');
}

function nextQuestion() {
  current++;
  if (current >= QUESTIONS.length) {
    showScore();
  } else {
    show('screen-question');
    loadQuestion();
  }
}

function showScore() {
  const pct = Math.round((correct / QUESTIONS.length) * 100);
  document.getElementById('scoreNum').textContent = score;
  document.getElementById('scoreDenom').textContent = `/ ${QUESTIONS.length * POINTS_PER_Q}`;
  document.getElementById('valCorrect').textContent = `${correct}/${QUESTIONS.length}`;
  document.getElementById('valWrong').textContent = `${wrong}/${QUESTIONS.length}`;
  document.getElementById('valPct').textContent = `${pct}%`;

  let rank, emoji, title, sub;
  if (pct >= 88) {
    rank = 'ğŸ§  AI Risk Authority'; emoji = 'ğŸ†'; title = 'ELITE SCORE!';
    sub = 'You understand AI engineering risks in banking at an expert level. Come build with us.';
    launchConfetti();
  } else if (pct >= 63) {
    rank = 'ğŸ¤– AI-Aware Engineer'; emoji = 'ğŸ¥ˆ'; title = 'STRONG SHOWING';
    sub = 'Solid AI risk awareness. A few more blind spots to close â€” visit our demo booth.';
  } else if (pct >= 38) {
    rank = 'ğŸ”§ Traditional Builder'; emoji = 'ğŸ¥‰'; title = 'GETTING THERE';
    sub = 'You know the fundamentals but AI engineering in banking has new rules. Come learn more.';
  } else {
    rank = 'ğŸ“‹ Compliance Rookie'; emoji = 'ğŸ¦–'; title = 'ROOM TO GROW';
    sub = 'Everyone starts somewhere. Come see the SmartSDLC demo â€” your AI journey begins today.';
  }

  document.getElementById('scoreEmoji').textContent = emoji;
  document.getElementById('scoreTitle').textContent = title;
  document.getElementById('scoreSub').textContent = sub;
  document.getElementById('rankText').textContent = rank;

  show('screen-score');

  setTimeout(() => {
    document.getElementById('barCorrect').style.width = `${pct}%`;
    document.getElementById('barWrong').style.width = `${(wrong / QUESTIONS.length) * 100}%`;
    document.getElementById('barPct').style.width = `${pct}%`;
  }, 300);
}

function launchConfetti() {
  const colors = ['#4ade80','#f59e0b','#3b82f6','#a855f7','#ef4444','#22c55e'];
  for (let i = 0; i < 60; i++) {
    const el = document.createElement('div');
    el.className = 'confetti-piece';
    el.style.left = Math.random() * 100 + 'vw';
    el.style.background = colors[Math.floor(Math.random() * colors.length)];
    el.style.animationDelay = (Math.random() * 2) + 's';
    el.style.animationDuration = (2 + Math.random() * 2) + 's';
    el.style.width = el.style.height = (8 + Math.random() * 10) + 'px';
    el.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 5000);
  }
}

function restartQuiz() {
  startQuiz();
}
</script>
</body>
</html>
